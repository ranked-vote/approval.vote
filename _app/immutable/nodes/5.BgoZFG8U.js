import{aK as a,aO as s,aT as e,aV as t,aX as i,aY as v,aP as n,aQ as l,bv as d,a$ as o,b2 as r,b0 as c,aU as b,b1 as w,aR as f,aW as p,bl as h,ba as m,b4 as g,bw as u,bx as $,b5 as x,bn as N}from"../chunks/CuVHsZBO.js";var j=e('<div class="office svelte-bs0w8t"> </div>'),M=e('<div class="result-row svelte-bs0w8t"><div></div> <div><div class="candidate-name svelte-bs0w8t"> </div> <div class="percentage-container svelte-bs0w8t"><div class="percentage svelte-bs0w8t"> </div> <div class="approval svelte-bs0w8t">approval</div></div></div></div>'),k=e('<div class="header svelte-bs0w8t"><canvas width="120" height="120" class="qr-code svelte-bs0w8t"></canvas> <div class="header-content svelte-bs0w8t"><div class="brand svelte-bs0w8t">Approval.Vote</div> <div class="election-info svelte-bs0w8t"><div class="jurisdiction svelte-bs0w8t"> </div> <!> <div class="election svelte-bs0w8t"> </div></div></div></div> <div class="results svelte-bs0w8t"></div>',1),C=e('<div class="content"><p>Election not found</p></div>'),V=e('<div class="card svelte-bs0w8t"><!></div>');function q(e,q){a(q,!0);const z=r(()=>q.data.report);let A=l(void 0);s(()=>{if(!n(A))return;const a=`https://approval.vote/report/${q.data.path}`;d.toCanvas(n(A),a,{width:120,margin:1,color:{dark:"#666666",light:"#ffffff"}})});const E=r(()=>n(z).candidates.map(a=>({name:a.name,percentage:(a.votes/n(z).ballotCount*100).toFixed(1),votes:a.votes,winner:a.winner})).sort((a,s)=>s.votes-a.votes)),F=r(()=>Math.min(180,Math.max(120,630/(n(E).length+2)))),K=r(()=>(630-n(F))/n(E).length),O=r(()=>Math.min(2.5,Math.max(1,8/n(E).length)));var P=V(),Q=o(P),R=a=>{var s=k(),e=b(s),v=o(e);w(v,a=>f(A,a),()=>n(A));var l=p(v,2),d=p(o(l),2),r=o(d),C=o(r,!0);c(r);var V=p(r,2),q=a=>{var s=j(),e=o(s,!0);c(s),g(()=>x(e,n(z).info.officeName)),i(a,s)};t(V,a=>{n(z).info.officeName!==n(z).info.jurisdictionName&&a(q)});var P=p(V,2),Q=o(P);c(P),c(d),c(l),c(e);var R=p(e,2);h(R,21,()=>n(E),N,(a,s)=>{var e=M(),t=o(e);let v;var l=p(t,2);let d;var r=o(l),b=o(r,!0);c(r);var w=p(r,2),f=o(w),h=o(f);c(f),m(2),c(w),c(l),c(e),g(()=>{u(e,`height: ${n(K)??""}px; font-size: ${n(O)??""}rem;`),v=$(t,1,"background-fill svelte-bs0w8t",null,v,{winner:n(s).winner}),u(t,`width: ${n(s).percentage??""}%`),d=$(l,1,"winner-stats svelte-bs0w8t",null,d,{winner:n(s).winner}),x(b,n(s).name),x(h,`${n(s).percentage??""}%`)}),i(a,e)}),c(R),g(a=>{u(e,`height: ${n(F)??""}px`),x(C,n(z).info.jurisdictionName),x(Q,`${n(z).info.electionName??""} (${a??""})`)},[()=>n(z).info.date.slice(0,4)]),i(a,s)},T=a=>{var s=C();i(a,s)};t(Q,a=>{n(z)?.info&&n(E).length>0?a(R):a(T,!1)}),c(P),i(e,P),v()}export{q as component};
